---
title: "Команды данных"
source: "https://blacksmithgu.github.io/obsidian-dataview/queries/data-commands/"
author:
published:
created: 2024-11-30
description:
tags:
  - "dataview"
  - "data"
  - "command"
---
## Команды данных

Различные команды, из которых могут состоять запросы dataview. Команды выполняются по порядку, и у вас могут быть дублирующиеся команды (например, несколько `WHERE` блоков или несколько `GROUP BY`блоков).

## ОТ

Оператор `FROM`определяет, какие страницы будут изначально собираться и передаваться в другие команды для дальнейшей фильтрации. Вы можете выбрать из любого [источника](https://blacksmithgu.github.io/obsidian-dataview/queries/reference/sources) , что в настоящее время означает по папке, по тегу или по входящим/исходящим ссылкам.

- **Теги** : чтобы выбрать тег (и все его подтеги), используйте `FROM #tag`.
- **Папки** : чтобы выбрать папку (и все ее подпапки), используйте `FROM "folder"`.
- **Отдельные файлы** : чтобы выбрать один файл, используйте `FROM "path/to/file"`.
- **Ссылки** : Вы можете выбрать либо ссылки НА файл, либо все ссылки ИЗ файла.
- Чтобы получить все страницы, ссылающиеся на `[[note]]`, используйте `FROM [[note]]`.
- Чтобы получить все страницы, ссылающиеся ОТ `[[note]]`(т. е. все ссылки в этом файле), используйте `FROM outgoing([[note]])`.

Вы можете составить эти фильтры, чтобы получить более продвинутые источники, используя `and`и `or`.

- Например, `#tag and "folder"`вернет все страницы в `folder`и с `#tag`.
- `[[Food]] or [[Exercise]]`выдаст все страницы, ссылающиеся на `[[Food]]`OR `[[Exercise]]`.

Вы также можете «отрицать» источники, чтобы получить все, что НЕ соответствует источнику, используя `-`:

- `-#tag`исключит файлы, имеющие указанный тег.
- `#tag and -"folder"`будут включены только отмеченные файлы `#tag`, которые НЕ находятся в формате `"folder"`.

## ГДЕ

`true`Фильтровать страницы по полям. Будут выданы только страницы, где предложение оценивается как .

1. Получить все файлы, которые были изменены за последние 24 часа:

```
LIST WHERE file.mtime >= date(today) - dur(1 day)
```
2. Найти все проекты, которые не отмечены как завершенные и которым больше месяца:

```
LIST FROM #projects
WHERE !completed AND file.ctime <= date(today) - dur(1 month)
```

## СОРТИРОВАТЬ

Сортирует все результаты по одному или нескольким полям.

```
SORT date [ASCENDING/DESCENDING/ASC/DESC]
```

Вы также можете задать несколько полей для сортировки. Сортировка будет выполнена на основе первого поля. Затем, если возникнет ничья, второе поле будет использовано для сортировки связанных полей. Если все еще есть ничья, третья сортировка разрешит ее и т. д.

```
SORT field1 [ASCENDING/DESCENDING/ASC/DESC], ..., fieldN [ASC/DESC]
```

## ГРУППИРОВАТЬ ПО

Группировать все результаты по полю. Выдает одну строку на уникальное значение поля, которое имеет 2 свойства: одно, соответствующее полю, по которому выполняется группировка, и `rows`поле массива, которое содержит все совпавшие страницы.

```
GROUP BY field
GROUP BY (computed_field) AS name
```

Чтобы упростить работу с `rows`массивом, Dataview поддерживает "swizzling" полей. Если вам нужно поле `test`из каждого объекта в `rows`массиве, тогда `rows.test`автоматически извлечет `test`поле из каждого объекта в `rows`, что даст новый массив. Затем вы можете применить операторы агрегации, такие как `sum()`или , `flat()`к полученному массиву.

## СГЛАЖИВАТЬ

Выравнивает массив в каждой строке, получая по одной строке результата на каждую запись в массиве.

```
FLATTEN field
FLATTEN (computed_field) AS name
```

Например, выровняйте `authors`поле в каждой литературной заметке, чтобы на каждого автора приходилось по одной строке:

Запрос

```
TABLE authors FROM #LiteratureNote
FLATTEN authors
```

Выход

Это можно использовать, когда есть глубоко вложенный список, который вы хотите использовать более просто. Например, `file.lists`или `file.tasks`. Обратите внимание на более простой запрос, хотя конечные результаты немного отличаются (сгруппированные и не сгруппированные). Вы можете использовать `GROUP BY file.link`для достижения идентичных результатов, но вам нужно будет использовать, `rows.T.text`как описано ранее.

```
table T.text as "Task Text"
from "Scratchpad"
flatten file.tasks as T
where T.text
```

```
table filter(file.tasks.text, (t) => t) as "Task Text"
from "Scratchpad"
where file.tasks.text
```

`FLATTEN`упрощает работу с вложенными списками, поскольку в этом случае можно использовать для них более простые условия where вместо использования таких функций, как `map()`или `filter()`.

## ПРЕДЕЛ

Ограничьте результаты максимум N значениями.

Команды обрабатываются в том порядке, в котором они написаны, поэтому ниже приводится сортировка результатов *после того, как* они уже были ограничены:

```
LIMIT 5
SORT date ASCENDING
```

Язык этой страницы: Английский

Всегда переводить Английский на Русский  
Никогда не переводить Английский  
Никогда не переводить blacksmithgu.github.io